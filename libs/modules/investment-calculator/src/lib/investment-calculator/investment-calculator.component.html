<h1>Investment Calculator</h1>

<p>
    The Investment Calculator can be used to calculate a specific parameter for
    an investment plan. The tabs represent the desired parameter to be found.
    For example, to calculate the return rate needed to reach an investment goal
    with particular inputs, click the 'Return Rate' tab.
</p>

<form [formGroup]="form" (ngSubmit)="submit()" class="flex gap-x-8">
    <div class="flex flex-col gap-y-4">
        <p-form-field>
            <p-label for="startingAmount">Starting Amount</p-label>

            <input
                pInput
                type="text"
                name="startingAmount"
                formControlName="startingAmount"
                mask="separator.2"
                placeholder="Starting Amount"
                prefix="$ "
            />

            @if (form.controls.startingAmount.hasError('required')) {
            <p-error>This field is required</p-error>
            }
        </p-form-field>

        <p-form-field>
            <p-label for="investLength">After</p-label>
            <input
                pInput
                type="text"
                name="investLength"
                formControlName="investLength"
                placeholder="Duration"
                mask="99"
                suffix=" year(s)"
            />

            @if (form.controls.investLength.hasError('required')) {
            <p-error>This field is required</p-error>
            }
        </p-form-field>

        <p-form-field>
            <p-label for="returnRate">Return Rate</p-label>
            <input
                pInput
                type="text"
                name="returnRate"
                formControlName="returnRate"
                placeholder="Return Rate"
                mask="percent.2"
                suffix="%"
            />

            @if (form.controls.returnRate.hasError('required')) {
            <p-error>This field is required</p-error>
            } @if (form.controls.returnRate.hasError('min')) {
            <p-error>This field must be greater than 0</p-error>
            }
        </p-form-field>

        <p-form-field>
            <p-label for="compoundPeriod">Compound</p-label>
            <select
                pInput
                name="compoundPeriod"
                formControlName="compoundPeriod"
                placeholder="Compound Period"
            >
                @for (period of compoundPeriod; track $index) {
                <option [value]="period.value">
                    {{ period.viewValue }}
                </option>
                }
            </select>
        </p-form-field>

        <p-form-field>
            <p-label for="contributeAmount">Additional Contribution</p-label>
            <input
                pInput
                type="text"
                name="contributeAmount"
                formControlName="contributeAmount"
                placeholder="Additional Contribution"
                mask="separator.2"
                [allowNegativeNumbers]="false"
                prefix="$ "
            />

            @if (form.controls.contributeAmount.hasError('required')) {
            <p-error>This field is required</p-error>
            }
        </p-form-field>

        <p-form-field>
            <p-label for="compoundPeriod">Contribute At</p-label>
            <select
                pInput
                name="contributeTiming"
                formControlName="contributeTiming"
                placeholder="Compound Period"
            >
                @for (period of contributeTiming; track $index) {
                <option [value]="period.value">
                    {{ period.viewValue }}
                </option>
                }
            </select>
        </p-form-field>

        <p-form-field>
            <p-label for="contributeFrequency">Of each</p-label>
            <select
                pInput
                name="contributeFrequency"
                formControlName="contributeFrequency"
                placeholder="Compound Period"
            >
                @for (period of contributeFrequency; track $index) {
                <option [value]="period.value">
                    {{ period.viewValue }}
                </option>
                }
            </select>
        </p-form-field>

        <button
            class="justify-between p-button p-button--solid"
            [disabled]="form.invalid"
            type="submit"
        >
            <span>Calculate</span>

            <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-4"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m8.25 4.5 7.5 7.5-7.5 7.5"
                />
            </svg>
        </button>
    </div>

    <div></div>
</form>
